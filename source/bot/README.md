
# Project Setup Guide for the Discord Bot

This guide walks you through setting up and configuring the Discord bot.

## Prerequisites

Before you begin, make sure you have the following installed/prepared:

- [Node.js](https://nodejs.org/) (v16.9.0 or higher)
- [npm](https://www.npmjs.com/) (comes with Node.js)
- A [Discord account](https://discord.com/)
- A Discord server where you have permission to add bots

## 1. Install Node.js

- **Windows**  
  Download the Windows installer from the [Node.js website](https://nodejs.org/) and follow the setup wizard.

- **macOS**  
  Either:  
  1. Download and run the macOS installer from the [Node.js website](https://nodejs.org/), _or_  
  2. Use Homebrew:

     ```sh
     brew install node
     ```

- **Linux**  
  Use your distribution’s package manager, or check the official [Node.js installation guide](https://nodejs.org/en/download/package-manager/) for distro-specific instructions.  

---
## 2. Prepare Your Project Folder

1. Open the folder containing  your bot.

2. Open your terminal in the project folder.

3. Confirm Node.js is installed:

   ```sh
   node -v
   ```

   You should see a version (preferably v16 or higher).

---

## 3. Initialize the Project

```sh
npm init
```



This creates a `package.json` file to track your project’s dependencies.

---

## 4. Install discord.js

Install `discord.js` :

```sh
npm install discord.js

```
---
## 5. Setting Up a Bot Application (via Discord Developer Portal)

1. Go to the [Discord Developer Portal](https://discord.com/developers/applications)
2. Click "New Application"
3. Name your application and click Create
4. Select "bot" in the third column
5. Select "applications.commands" in the second column
6. Enable these Bot Permissions
   - View Channels
   - Send Messages
   - Send Messages in Threads
   - Manage Messages
   - Read Message History
   - Use Slash Commands
7. Make sure the Integration Type is set to Guild Install
8. Copy the generated URL and paste it into your browser
9. Select the server you would like to add your bot to
10. Click Continue
11. Confirm the permission set for this server's version of the bot
12. Click Authorize

#### Note: If you plan to publish or verify your bot, only enable permissions that are truly necessary.

---

## 6. Add Your Bot to a Server
1. In the Developer Portal, go to "OAuth2 > URL Generator"
2. Under Scopes, check:
   - `bot`
3. Under Bot Permissions, select the permissions your bot needs, for example:
   - Send Messages
   - Read Message History
   - View Channels
4. Copy the generated URL at the bottom
5. Paste it into your browser and select a server you manage to invite the bot

#### Note: You must have Manage Server permission in the chosen server to add bots.
---
## 7. Edit the config.json file with your bot's specifics
1. Open up the config.json file
2. Add the token, clientID, and guildID found within your bot's Developer Portal to the file
3. Add the apiBaseUrl, apiKey, and playtestSessionID generated by the solution's backend to the file
---

## 8. Run the bot
Now that we've configured the bot, register the commands to Discord by running the deploy-commands file:
```sh
   node deploy-commands.js
   ```
And finally run the bot:
```sh
   node index.js
   ```

## How to register and connect players to the stream
With the bot deployed and running, you can now have users interact with it using slash commands within the server the bot is deployed in.

For example, if wanting to register for an existing playtesting session, users will input the following command:
```sh
   /register
   ```
 
 The bot will then confirm if the user would like to be added to the playtesting event.

If confirmed, the bot will then call the API backend using the player's global Discord username as an indentifier, register for the event, and if successful, returns the user the required login credentials as well as their uniquely created hashed URL link to connect to the playtesting stream.


![Registered User Screenshot](/../ModifyingBotReadme/source/bot/discordBot_registered_ss_clean.png?raw=true "Registered User Screenshot")


#### Note, the bot will send the response to the user through usage of ephemeral messaging only available to registered Discord bots to reduce phishing risk, as well as to avoid cluttering the server itself. This can also be disabled within the register command's code if preferred.

## Adding new commands to the bot
As your bot's needs evolve, you can add additional commands by creating additional Javascript files for each new command as displayed within the commands/utility folder. Example commands can be found in the folder, as well as documentation for the Discord.js library found [here.](https://discord.js.org/docs/packages/discord.js/14.21.0) 

Once created and added to the utility folder, register the new command to Discord by running the deploy-commands file:
```sh
   node deploy-commands.js
   ```

And restart the bot: 
```sh
   node index.js
   ```
